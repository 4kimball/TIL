# HTTP 리퀘스트 메시지

> URL을 입력하여 HTTP를 통해 웹 서버에 액세스하기 위해서는 HTTP의 형식에 맞게 데이터를 변형해야 한다. 그 중 첫 번째 과정으로 브라우저에서 HTTP 리퀘스트 메시지를 생성하는 것을 알아본다.



### 1. URL 해석하기

브라우저는 리퀘스트 메시지를 생성하기 전 입력된 URL을 해석한다. 웹 서버에 액세스하기 위한 URL 형식을 보자.

```shell
http: + // + "웹 서버이름" + / + "디렉토리 이름" + / + "파일이름"
```

- `http:` : 어떤 프로토콜로 이동할 것인지 알려준다. 이 부분에 파일을 업로드/다운로드 할 때 사용하는 `ftp:` 가 올 수 있다.
- `//` : 백 슬래시 두개 다음에는 웹 서버의 이름이 온다.
- `/` : 웹 서버에서 우리가 원하는 데이터가 저장된 경로를 나타낸다.
- 위에서 사용한 것 뿐만 아니라 URL에 `?` , `&` , `=` 등의 특수 문자들이 올 수 있다.

위와 같이 브라우저는 URL을 해석하면 어디에 액세스할지 판단하게 된다.



### 2. HTTP

HTTP 리퀘스트 메시지를 생성을 알아보기 전에 HTTP의 기본 개념을 알아보자.

HTTP를 사용하여 웹 서버에 액세스를 할 수 있으며 클라이언트(EX. 브라우저)와 서버가 주고받는 메시지의 내용이나 순서를 정한 것이다. 즉, 클라이언트와 서버가 메시지를 주고받기로한 통로가 HTTP입니다. 

예를 들어, HTTP를 우체국이라고 하면 상대방에게 편지를 보내려고 할 때 우체국뿐만 아니라 다른 경로로 보낼 수 있지만 상대방과 나는 오로지 우체국을 통해서만 편지를 주고받기로 하였다. 그렇기 때문에 우체국에서 정한 형식과 절차를 거쳐서 편지를 보내야한다.



HTTP 리퀘스트 메시지 안에는 `무엇을` , `어떻게 해서` 라는 내용이 들어있다.

- `무엇을` : 보통 페이지 데이터를 저장한 파일의 이름을 `URI` 로 쓰고, 그대로 `URL` 을 쓸 수도 있다. 우리가 요청한 데이터가 `무엇을` 에 해당되며 이 데이터가 저장되어 있는 장소를 `URI` 라고 한다.
- `어떻게 해서` : 요청한 데이터를 어떻게 할지 **메소드** 를 통해 웹 서버에 전달한다. **메소드** 에는 주로 `GET` 과 `POST` 가 쓰인다.
  - `GET` : URI로 지정한 정보를 추출하여 내용을 돌려보낸다.
  - `POST` : 클라이언트에서 서버로 데이터를 전송한다.

HTTP를 통해 클라이언트에서 서버로 리퀘스트 메시지를 보내면 서버는 스테이터스 코드를 전송하고 요청한 데이터를 보내게 된다.



### 3. 리퀘스트 메시지 작성

- HTTP 리퀘스트 메시지를 작성하는 포맷은 정해져 있기때문에 브라우저는 포맷에 맞게 리퀘스트 메시지를 생성한다.

```shell
# 리퀘스트 메시지
<메소드><공백><URI><공백><HTTP version>
<필드명>:<필드값>

<메시지 헤더>

<공백 행>
<메시지 본문>
```

- `리퀘스트 라인` : 첫 번째 행을 리퀘스트 라인이라하고, 리퀘스트 내용을 대략 알 수 있다.
- `메시지 헤더` : 한 행에 한개의 헤더 필드를 쓰고 리퀘스트의 부가적인 정보를 나타낸다.
- `메시지 본문` : 클라이언트에서 서버에 송신하는 데이터가 들어간다.



### 4. 응답 메시지

- 리퀘스트 메시지를 보내면 웹 서버에서 응답 메시지가 되돌아온다.
- 응답 메시지의 포맷도 정해져있으며 `스테이터스` , `응답문구` 를 첫 번째 행에 작성한다.
- 스테이터스 코드 
  - 1XX : 처리의 경과 상황 등을 통지
  - 2XX : 정상 종료
  - 3XX : 어떤 다른 조치가 필요함
  - 4XX : 클라이언트 측의 오류
  - 5XX : 서버측의 오류



