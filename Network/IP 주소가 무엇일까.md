# IP 주소가 무엇일까?

> TCP/IP에 대한 이해와 IP 주소가 어떻게 구성되어있는지 알아본다.



브라우저에서 HTTP 리퀘스트 메시지를 생성하여 서버에 보내고자 한다. 하지만 브라우저는 URL을 해석하고 HTTP 메시지를 만드는 일은 할 수 있지만 메시지를 네트워크에 송출할 수는 없다.

따라서, 브라우저는 OS에 네트워크 송출에 대한 의뢰를 하게된다. 이때 OS에 도메인명이 아닌 IP 주소를 전달해야한다. 그렇기 때문에 브라우저는 DNS에서 IP주소를 전달받아 OS에 전달하게 된다.



### TCP/IP

IP 주소는 많이 들어봤지만 정확한 의미를 이해하지는 못했다. IP주소를 알아보기 전에 TCP/IP에 대해서 먼저 알아보자.

(위키백과) TCP/IP는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 통신규약이라고 한다. TCP/IP가 나오기 이전에는 하나의 회선을 독점하여 정보를 주고받았다. 이를 위해 일대일로 연결이 되어있어야 했다. 이러한 방식을 **서킷 방식**이라고 한다. 다른 사람들이 정보를 주고받는 일이 끝난 이후에 내가 다른 사람과 정보를 주고받을 수 있다. 

이후 정보를 나눠서 보내는 방식을 사용하게 되었고 이를 **패킷 방식**이라고 하였다. 여기서 IP는 송신측에서 수신측까지 최대한 빠르게 도착할 수 있도록 한다. 정보의 순서가 뒤죽박죽이어도 신경쓰지 않는다.

정보의 순서를 신경쓰는 것은 TCP다. TCP는 패킷의 순서를 고려하고 모든 패킷이 정상적으로 도착했는지 검사한다. 

따라서 인터넷이나 사내 LAN은 TCP/IP를 바탕으로 만들어졌으며 TCP/IP에 정의하는 IP주소를 통해 정보를 주고받게 된다.



### IP 주소의 구성

IP 주소는 네트워크 번호와 호스트 번호로 이루어져 있다. 

인터넷은 작은 서브넷들이 연결되어 거대한 네트워크를 형성한다. 이때 서브넷과 서브넷을 라우터로 연결하며 서브넷 안의 컴퓨터들은 허브를 통해 묶는다. 

따라서 어떠한 서브넷에 포함되어 있는지 알기위한 네트워크 번호와 서브넷 안에 어떤 컴퓨터인지 알기위한 호스트 번호로 이루어져있다.

**IP 주소는 8bit씩 점으로 나눠 총 32bit**로 표현한다. `11.29.32.8`과 같은 형식이 IP 주소다. 하지만 IP주소만 보고 네트워크 번호와 호스트 번호를 알 수가 없는데 이를 위해 **넷마스크**를 사용한다.

**넷마스크**는 IP주소와 마찬가지로 32bit로 표현을 하는데 `255.255.255.0`과 같다. 여기서 255를 2진수로 표기하면 `11111111`이 되고  `1`을 나타내는 부분은 네트워크 번호이고, 0은 호스트 번호가 된다. 

위에서 넷마스크를 IP주소에 적용하면 `11.29.32`는 네트워크 번호가 되고 `8`은 호스트 번호가 된다.



### IP주소 대신 도메인 명을 사용한다면?

IP주소는 숫자로 구성되어 있어 사람들이 기억하기 힘들다. 따라서 IP주소 대신 도메인 이름을 사용하고 도메인 이름에 해당되는 IP 주소를 찾아서 이동하는데 IP주소대신 도메인 이름을 사용하면 어떨까?

IP주소는 총 4byte의 수이지만 도메인 이름은 최대 255byte가 된다. 따라서 도메인 이름을 사용하게 되면 라우터에 부하되어 전송속도가 저하될 것이다. 

따라서 데이터를 전송할 때는 IP주소를 사용하고 사람이 기억하기 쉽게 도메인 주소를 사용하게 된다.

